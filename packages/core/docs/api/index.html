<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@cascadeflow/core - v0.5.0</title><meta name="description" content="Documentation for @cascadeflow/core"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">@cascadeflow/core - v0.5.0</a><div id="tsd-toolbar-links"><a href="https://github.com/lemony-ai/cascadeflow">GitHub</a><a href="https://github.com/lemony-ai/cascadeflow/tree/main/packages/core/examples">Examples</a><a href="https://github.com/lemony-ai/cascadeflow/tree/main/docs">Python Docs</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@cascadeflow/core - v0.5.0</h1></div><div class="tsd-panel tsd-typography"><div align="center">
<picture>
  <source media="(prefers-color-scheme: dark)" srcset="media/CF_logo_bright.svg">
  <source media="(prefers-color-scheme: light)" srcset="media/CF_logo_dark.svg">
  <img alt="cascadeflow Logo" src="media/CF_logo_dark.svg" width="80%" style="margin: 20px auto;">
</picture>
<h1 id="cascadeflowcore" class="tsd-anchor-link">@cascadeflow/core<a href="#cascadeflowcore" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://www.npmjs.com/package/@cascadeflow/core"><img src="https://img.shields.io/npm/v/@cascadeflow/core?color=red&amp;label=npm" alt="npm version"></a>
<a href="../../LICENSE"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
<a href="https://www.typescriptlang.org/"><img src="https://img.shields.io/badge/TypeScript-5.0+-blue.svg" alt="TypeScript"></a>
<a href="https://github.com/lemony-ai/cascadeflow/actions/workflows/test.yml"><img src="https://github.com/lemony-ai/cascadeflow/actions/workflows/test.yml/badge.svg" alt="Tests"></a></p>
<p><strong><img src="media/CF_ts_color.svg" width="22" height="22" alt="TypeScript" style="vertical-align: middle;"/> TypeScript/JavaScript library for cascadeflow</strong></p>
</div>
<hr>
<p><strong>Smart AI model cascading for cost optimization.</strong></p>
<p>Save 40-85% on LLM costs with intelligent model routing. Available for Node.js, browser, and edge environments.</p>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@cascadeflow/core</span><br/><span class="hl-3"># or</span><br/><span class="hl-0">pnpm</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">@cascadeflow/core</span><br/><span class="hl-3"># or</span><br/><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">@cascadeflow/core</span>
</code><button type="button">Copy</button></pre>

<h2 id="quick-start" class="tsd-anchor-link">Quick Start<a href="#quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="recommended-setup-claude-haiku-gpt-5" class="tsd-anchor-link">Recommended Setup (Claude Haiku + GPT-5)<a href="#recommended-setup-claude-haiku-gpt-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">CascadeAgent</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@cascadeflow/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">agent</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CascadeAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">models:</span><span class="hl-1"> [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;claude-haiku-4-5&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">provider:</span><span class="hl-1"> </span><span class="hl-2">&#39;anthropic&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">cost:</span><span class="hl-1"> </span><span class="hl-8">0.001</span><span class="hl-1">  </span><span class="hl-3">// Fast, high-quality drafter</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;gpt-5&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">provider:</span><span class="hl-1"> </span><span class="hl-2">&#39;openai&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">cost:</span><span class="hl-1"> </span><span class="hl-8">0.00125</span><span class="hl-1">  </span><span class="hl-3">// Superior reasoning verifier (50% cheaper than GPT-4o!)</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">agent</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&#39;What is artificial intelligence?&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-5">result</span><span class="hl-1">.</span><span class="hl-5">content</span><span class="hl-1">);</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Cost: $</span><span class="hl-6">${</span><span class="hl-5">result</span><span class="hl-9">.</span><span class="hl-5">totalCost</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Savings: </span><span class="hl-6">${</span><span class="hl-5">result</span><span class="hl-9">.</span><span class="hl-5">savingsPercentage</span><span class="hl-6">}</span><span class="hl-2">%`</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h3 id="quality-configuration" class="tsd-anchor-link">Quality Configuration<a href="#quality-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Control when the cascade uses the drafter vs. verifier with quality thresholds:</p>
<pre><code class="typescript"><span class="hl-3">// Recommended: Complexity-aware thresholds</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">agent</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CascadeAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">models:</span><span class="hl-1"> [</span><br/><span class="hl-1">    { </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;claude-haiku-4-5&#39;</span><span class="hl-1">, </span><span class="hl-5">provider:</span><span class="hl-1"> </span><span class="hl-2">&#39;anthropic&#39;</span><span class="hl-1">, </span><span class="hl-5">cost:</span><span class="hl-1"> </span><span class="hl-8">0.001</span><span class="hl-1"> },</span><br/><span class="hl-1">    { </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;gpt-5&#39;</span><span class="hl-1">, </span><span class="hl-5">provider:</span><span class="hl-1"> </span><span class="hl-2">&#39;openai&#39;</span><span class="hl-1">, </span><span class="hl-5">cost:</span><span class="hl-1"> </span><span class="hl-8">0.00125</span><span class="hl-1"> }</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  </span><span class="hl-5">quality:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">confidenceThresholds:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">simple:</span><span class="hl-1"> </span><span class="hl-8">0.6</span><span class="hl-1">,      </span><span class="hl-3">// &quot;What is Python?&quot; - Accept 60%+ confidence</span><br/><span class="hl-1">      </span><span class="hl-5">moderate:</span><span class="hl-1"> </span><span class="hl-8">0.7</span><span class="hl-1">,    </span><span class="hl-3">// &quot;Compare Python vs Java&quot; - Accept 70%+</span><br/><span class="hl-1">      </span><span class="hl-5">hard:</span><span class="hl-1"> </span><span class="hl-8">0.8</span><span class="hl-1">,     </span><span class="hl-3">// &quot;Analyze quantum computing&quot; - Accept 80%+</span><br/><span class="hl-1">      </span><span class="hl-5">expert:</span><span class="hl-1"> </span><span class="hl-8">0.85</span><span class="hl-1">      </span><span class="hl-3">// &quot;Implement distributed cache&quot; - Accept 85%+</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Quick Configuration Options:</strong></p>
<pre><code class="typescript"><span class="hl-3">// Option 1: Use CASCADE_QUALITY_CONFIG (optimized for 50-60% acceptance)</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">CascadeAgent</span><span class="hl-1">, </span><span class="hl-5">CASCADE_QUALITY_CONFIG</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@cascadeflow/core&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">agent</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CascadeAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">models:</span><span class="hl-1"> [...],</span><br/><span class="hl-1">  </span><span class="hl-5">quality:</span><span class="hl-1"> </span><span class="hl-7">CASCADE_QUALITY_CONFIG</span><span class="hl-1">  </span><span class="hl-3">// Lower threshold (0.40) = more cost savings</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Option 2: Simple flat threshold</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">agent</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CascadeAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">models:</span><span class="hl-1"> [...],</span><br/><span class="hl-1">  </span><span class="hl-5">quality:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">threshold:</span><span class="hl-1"> </span><span class="hl-8">0.7</span><span class="hl-1">,              </span><span class="hl-3">// 70% confidence required (default)</span><br/><span class="hl-1">    </span><span class="hl-5">requireMinimumTokens:</span><span class="hl-1"> </span><span class="hl-8">10</span><span class="hl-1">     </span><span class="hl-3">// Minimum response length</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Option 3: Use defaults (no quality config needed)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">agent</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CascadeAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">models:</span><span class="hl-1"> [...]</span><br/><span class="hl-1">  </span><span class="hl-3">// Automatically uses threshold: 0.7</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>When to adjust:</strong></p>
<ul>
<li><strong>Lower thresholds (0.4-0.6)</strong>: More drafts accepted ‚Üí higher cost savings, slightly lower quality</li>
<li><strong>Higher thresholds (0.8-0.9)</strong>: Fewer drafts accepted ‚Üí lower savings, maximum quality</li>
<li><strong>Complexity-aware</strong>: Best balance ‚Üí adjusts automatically based on query difficulty</li>
</ul>
<blockquote>
<p><strong>‚ö†Ô∏è GPT-5 Requires Organization Verification</strong></p>
<p>To use GPT-5, your OpenAI organization must be verified:</p>
<ol>
<li>Go to <a href="https://platform.openai.com/settings/organization/general">https://platform.openai.com/settings/organization/general</a></li>
<li>Click &quot;Verify Organization&quot;</li>
<li>Wait ~15 minutes for access to propagate</li>
</ol>
<p><strong>Works immediately:</strong> The cascade above works right away! Claude Haiku handles 75% of queries, GPT-5 only called when needed.</p>
</blockquote>
<blockquote>
<p><strong>üìù Model Naming</strong></p>
<p>Both naming conventions work with CascadeFlow:</p>
<ul>
<li><code>claude-haiku-4-5</code> (used in presets, recommended)</li>
<li><code>claude-3-5-haiku-20241022</code> (Anthropic API format)</li>
</ul>
<p>The library accepts both formats and routes them correctly.</p>
</blockquote>
<h3 id="openai-only" class="tsd-anchor-link">OpenAI Only<a href="#openai-only" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">agent</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CascadeAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">models:</span><span class="hl-1"> [</span><br/><span class="hl-1">    { </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;gpt-4o-mini&#39;</span><span class="hl-1">, </span><span class="hl-5">provider:</span><span class="hl-1"> </span><span class="hl-2">&#39;openai&#39;</span><span class="hl-1">, </span><span class="hl-5">cost:</span><span class="hl-1"> </span><span class="hl-8">0.00015</span><span class="hl-1"> },</span><br/><span class="hl-1">    { </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;gpt-5&#39;</span><span class="hl-1">, </span><span class="hl-5">provider:</span><span class="hl-1"> </span><span class="hl-2">&#39;openai&#39;</span><span class="hl-1">, </span><span class="hl-5">cost:</span><span class="hl-1"> </span><span class="hl-8">0.00125</span><span class="hl-1"> }  </span><span class="hl-3">// Requires org verification</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="even-easier-use-presets" class="tsd-anchor-link">Even Easier: Use Presets<a href="#even-easier-use-presets" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>No configuration needed</strong> - just import a preset and go:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">CascadeAgent</span><span class="hl-1">, </span><span class="hl-5">PRESET_ULTRA_FAST</span><span class="hl-1">, </span><span class="hl-5">PRESET_BEST_OVERALL</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@cascadeflow/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Ultra-fast with Groq (5-10x faster than OpenAI)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">agent</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CascadeAgent</span><span class="hl-1">(</span><span class="hl-7">PRESET_ULTRA_FAST</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// Or best overall (Claude Haiku + GPT-4o-mini)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">agent</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CascadeAgent</span><span class="hl-1">(</span><span class="hl-7">PRESET_BEST_OVERALL</span><span class="hl-1">);</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">agent</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&#39;Your query here&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Available Presets:</strong></p>
<table>
<thead>
<tr>
<th>Preset</th>
<th>Best For</th>
<th>Speed</th>
<th>Cost/Query</th>
<th>API Keys</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PRESET_BEST_OVERALL</code></td>
<td>Most use cases</td>
<td>Fast (~2-3s)</td>
<td>~$0.0008</td>
<td>Anthropic + OpenAI</td>
</tr>
<tr>
<td><code>PRESET_ULTRA_FAST</code></td>
<td>Real-time apps</td>
<td>Ultra-fast (~1-2s)</td>
<td>~$0.0002</td>
<td>Groq</td>
</tr>
<tr>
<td><code>PRESET_ULTRA_CHEAP</code></td>
<td>High volume</td>
<td>Very fast (~1-3s)</td>
<td>~$0.00008</td>
<td>Groq + OpenAI</td>
</tr>
<tr>
<td><code>PRESET_OPENAI_ONLY</code></td>
<td>Single provider</td>
<td>Fast (~2-4s)</td>
<td>~$0.0004</td>
<td>OpenAI</td>
</tr>
<tr>
<td><code>PRESET_ANTHROPIC_ONLY</code></td>
<td>Claude fans</td>
<td>Fast (~2-3s)</td>
<td>~$0.002</td>
<td>Anthropic</td>
</tr>
<tr>
<td><code>PRESET_FREE_LOCAL</code></td>
<td>Privacy/offline</td>
<td>Moderate (~3-5s)</td>
<td>$0 (free)</td>
<td>None (Ollama)</td>
</tr>
</tbody>
</table>
<p><strong>Custom Presets:</strong></p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">CascadeAgent</span><span class="hl-1">, </span><span class="hl-5">createPreset</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@cascadeflow/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">agent</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CascadeAgent</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-0">createPreset</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">quality:</span><span class="hl-1"> </span><span class="hl-2">&#39;strict&#39;</span><span class="hl-1">,      </span><span class="hl-3">// &#39;cost-optimized&#39; | &#39;balanced&#39; | &#39;strict&#39;</span><br/><span class="hl-1">    </span><span class="hl-5">performance:</span><span class="hl-1"> </span><span class="hl-2">&#39;fast&#39;</span><span class="hl-1">,    </span><span class="hl-3">// &#39;fast&#39; | &#39;balanced&#39; | &#39;reliable&#39;</span><br/><span class="hl-1">    </span><span class="hl-5">includePremium:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">    </span><span class="hl-3">// Add premium tier (gpt-4o)</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="advanced-features" class="tsd-anchor-link">Advanced Features<a href="#advanced-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="üéöÔ∏è-quality-profiles" class="tsd-anchor-link">üéöÔ∏è Quality Profiles<a href="#üéöÔ∏è-quality-profiles" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Control quality validation with predefined profiles optimized for different use cases:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">CascadeAgent</span><span class="hl-1">, </span><span class="hl-5">QualityValidator</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@cascadeflow/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Strict Mode: Maximum quality with semantic validation</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">strictAgent</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CascadeAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">models:</span><span class="hl-1"> [...],</span><br/><span class="hl-1">  </span><span class="hl-5">cascade:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">enabled:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">qualityConfig:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">useProductionConfidence:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">strictMode:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">useSemanticValidation:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">minConfidence:</span><span class="hl-1"> </span><span class="hl-8">0.85</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">provider:</span><span class="hl-1"> </span><span class="hl-2">&#39;openai&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Or use factory methods</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">strictValidator</span><span class="hl-1"> = </span><span class="hl-5">QualityValidator</span><span class="hl-1">.</span><span class="hl-0">strict</span><span class="hl-1">();</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">prodValidator</span><span class="hl-1"> = </span><span class="hl-5">QualityValidator</span><span class="hl-1">.</span><span class="hl-0">forProduction</span><span class="hl-1">();    </span><span class="hl-3">// Multi-signal confidence</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">devValidator</span><span class="hl-1"> = </span><span class="hl-5">QualityValidator</span><span class="hl-1">.</span><span class="hl-0">forDevelopment</span><span class="hl-1">();     </span><span class="hl-3">// Lenient for testing</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">cascadeValidator</span><span class="hl-1"> = </span><span class="hl-5">QualityValidator</span><span class="hl-1">.</span><span class="hl-0">forCascade</span><span class="hl-1">();     </span><span class="hl-3">// Optimized for 50-60% acceptance</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">permissiveValidator</span><span class="hl-1"> = </span><span class="hl-5">QualityValidator</span><span class="hl-1">.</span><span class="hl-0">permissive</span><span class="hl-1">();  </span><span class="hl-3">// Maximum throughput</span>
</code><button type="button">Copy</button></pre>

<p><strong>Available Profiles:</strong></p>
<ul>
<li><strong>Strict</strong>: 85% confidence + semantic validation (maximum quality)</li>
<li><strong>Production</strong>: 70% confidence with multi-signal estimation (balanced)</li>
<li><strong>Development</strong>: 50% confidence, minimal word count (fast iteration)</li>
<li><strong>Cascade</strong>: 40% confidence, optimized for cost savings (50-60% draft acceptance)</li>
<li><strong>Permissive</strong>: 30% confidence, maximum throughput (highest savings)</li>
</ul>
<p><a href="media/quality-profiles.ts">üìñ Full example</a></p>
<h3 id="üì°-telemetry-callbacks" class="tsd-anchor-link">üì° Telemetry &amp; Callbacks<a href="#üì°-telemetry-callbacks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Monitor cascade operations with event-driven callbacks:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">CascadeAgent</span><span class="hl-1">, </span><span class="hl-5">CallbackManager</span><span class="hl-1">, </span><span class="hl-5">CallbackEvent</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@cascadeflow/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">callbackManager</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CallbackManager</span><span class="hl-1">(</span><span class="hl-6">true</span><span class="hl-1">); </span><span class="hl-3">// verbose=true</span><br/><br/><span class="hl-3">// Track query lifecycle</span><br/><span class="hl-5">callbackManager</span><span class="hl-1">.</span><span class="hl-0">register</span><span class="hl-1">(</span><span class="hl-5">CallbackEvent</span><span class="hl-1">.</span><span class="hl-7">QUERY_START</span><span class="hl-1">, (</span><span class="hl-5">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Query started: &quot;</span><span class="hl-6">${</span><span class="hl-5">data</span><span class="hl-9">.</span><span class="hl-5">query</span><span class="hl-6">}</span><span class="hl-2">&quot;`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">callbackManager</span><span class="hl-1">.</span><span class="hl-0">register</span><span class="hl-1">(</span><span class="hl-5">CallbackEvent</span><span class="hl-1">.</span><span class="hl-7">COMPLEXITY_DETECTED</span><span class="hl-1">, (</span><span class="hl-5">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Complexity: </span><span class="hl-6">${</span><span class="hl-5">data</span><span class="hl-9">.</span><span class="hl-5">data</span><span class="hl-9">.</span><span class="hl-5">complexity</span><span class="hl-6">}</span><span class="hl-2"> (confidence: </span><span class="hl-6">${</span><span class="hl-5">data</span><span class="hl-9">.</span><span class="hl-5">data</span><span class="hl-9">.</span><span class="hl-5">confidence</span><span class="hl-6">}</span><span class="hl-2">)`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">callbackManager</span><span class="hl-1">.</span><span class="hl-0">register</span><span class="hl-1">(</span><span class="hl-5">CallbackEvent</span><span class="hl-1">.</span><span class="hl-7">DRAFT_ACCEPTED</span><span class="hl-1">, (</span><span class="hl-5">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Draft accepted! Savings: $</span><span class="hl-6">${</span><span class="hl-5">data</span><span class="hl-9">.</span><span class="hl-5">data</span><span class="hl-9">.</span><span class="hl-5">savings</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">agent</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CascadeAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">models:</span><span class="hl-1"> [...],</span><br/><span class="hl-1">  </span><span class="hl-5">callbacks:</span><span class="hl-1"> </span><span class="hl-5">callbackManager</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">cascade:</span><span class="hl-1"> { </span><span class="hl-5">enabled:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Available Events:</strong></p>
<ul>
<li><code>QUERY_START</code> / <code>QUERY_COMPLETE</code> - Query lifecycle</li>
<li><code>COMPLEXITY_DETECTED</code> - Query complexity analysis</li>
<li><code>CASCADE_DECISION</code> - Routing decisions</li>
<li><code>QUALITY_VALIDATION</code> - Quality checks</li>
<li><code>DRAFT_ACCEPTED</code> / <code>DRAFT_REJECTED</code> - Draft outcomes</li>
<li><code>VERIFIER_CALLED</code> - Verifier invocations</li>
</ul>
<p><a href="media/telemetry-callbacks.ts">üìñ Full example</a></p>
<h3 id="üì¶-batch-processing" class="tsd-anchor-link">üì¶ Batch Processing<a href="#üì¶-batch-processing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Process multiple queries with progress tracking and analytics:</p>
<pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">queries</span><span class="hl-1"> = [</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;What is TypeScript?&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;Explain async/await.&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;What are design patterns?&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">];</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">batchResult</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">agent</span><span class="hl-1">.</span><span class="hl-0">runBatch</span><span class="hl-1">(</span><span class="hl-5">queries</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-5">strategy:</span><span class="hl-1"> </span><span class="hl-5">BatchStrategy</span><span class="hl-1">.</span><span class="hl-7">SEQUENTIAL</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">continueOnError:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">onProgress</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">completed</span><span class="hl-1">, </span><span class="hl-5">total</span><span class="hl-1">, </span><span class="hl-5">currentQuery</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`[</span><span class="hl-6">${</span><span class="hl-9">(</span><span class="hl-5">completed</span><span class="hl-1">/</span><span class="hl-5">total</span><span class="hl-1">*</span><span class="hl-8">100</span><span class="hl-9">).</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-8">0</span><span class="hl-9">)</span><span class="hl-6">}</span><span class="hl-2">%] </span><span class="hl-6">${</span><span class="hl-5">completed</span><span class="hl-6">}</span><span class="hl-2">/</span><span class="hl-6">${</span><span class="hl-5">total</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Analyze results</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Success rate: </span><span class="hl-6">${</span><span class="hl-9">(</span><span class="hl-5">batchResult</span><span class="hl-9">.</span><span class="hl-5">successCount</span><span class="hl-9"> </span><span class="hl-1">/</span><span class="hl-9"> </span><span class="hl-5">queries</span><span class="hl-9">.</span><span class="hl-5">length</span><span class="hl-9"> </span><span class="hl-1">*</span><span class="hl-9"> </span><span class="hl-8">100</span><span class="hl-9">).</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-8">1</span><span class="hl-9">)</span><span class="hl-6">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Total cost: $</span><span class="hl-6">${</span><span class="hl-5">batchResult</span><span class="hl-9">.</span><span class="hl-5">results</span><span class="hl-9">.</span><span class="hl-0">reduce</span><span class="hl-9">((</span><span class="hl-5">sum</span><span class="hl-9">, </span><span class="hl-5">r</span><span class="hl-9">) </span><span class="hl-6">=&gt;</span><span class="hl-9"> </span><span class="hl-5">sum</span><span class="hl-9"> </span><span class="hl-1">+</span><span class="hl-9"> (</span><span class="hl-5">r</span><span class="hl-9">.</span><span class="hl-5">result</span><span class="hl-9">?.</span><span class="hl-5">totalCost</span><span class="hl-9"> </span><span class="hl-1">||</span><span class="hl-9"> </span><span class="hl-8">0</span><span class="hl-9">), </span><span class="hl-8">0</span><span class="hl-9">)</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Draft acceptance: </span><span class="hl-6">${</span><span class="hl-5">batchResult</span><span class="hl-9">.</span><span class="hl-5">results</span><span class="hl-9">.</span><span class="hl-0">filter</span><span class="hl-9">(</span><span class="hl-5">r</span><span class="hl-9"> </span><span class="hl-6">=&gt;</span><span class="hl-9"> </span><span class="hl-5">r</span><span class="hl-9">.</span><span class="hl-5">result</span><span class="hl-9">?.</span><span class="hl-5">draftAccepted</span><span class="hl-9">).</span><span class="hl-5">length</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><a href="media/batch-processing.ts">üìñ Full example</a></p>
<h3 id="üîÄ-router-integration" class="tsd-anchor-link">üîÄ Router Integration<a href="#üîÄ-router-integration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Intelligent routing with complexity analysis and capability filtering:</p>
<pre><code class="typescript"><span class="hl-3">// PreRouter: Automatically routes based on query complexity</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">simpleResult</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">agent</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&#39;What is 2 + 2?&#39;</span><span class="hl-1">);</span><br/><span class="hl-3">// ‚Üí Uses draft model (simple query)</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">complexResult</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">agent</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;Explain quantum computing theory with recent research references.&#39;</span><br/><span class="hl-1">);</span><br/><span class="hl-3">// ‚Üí Routes directly to best model (complex query)</span><br/><br/><span class="hl-3">// ToolRouter: Filters to tool-capable models</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">calculatorTool</span><span class="hl-1"> = </span><span class="hl-0">createTool</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;calculator&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;Perform calculations&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">function</span><span class="hl-5">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">expression</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-0">eval</span><span class="hl-1">(</span><span class="hl-5">expression</span><span class="hl-1">),</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">toolResult</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">agent</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&#39;Calculate 125 * 47&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-5">calculatorTool</span><span class="hl-1">],</span><br/><span class="hl-1">});</span><br/><span class="hl-3">// ‚Üí Automatically excludes models without tool support</span><br/><br/><span class="hl-3">// Get router statistics</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">stats</span><span class="hl-1"> = </span><span class="hl-5">agent</span><span class="hl-1">.</span><span class="hl-0">getRouterStats</span><span class="hl-1">();</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-5">stats</span><span class="hl-1">.</span><span class="hl-5">preRouter</span><span class="hl-1">);  </span><span class="hl-3">// Complexity-based routing stats</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-5">stats</span><span class="hl-1">.</span><span class="hl-5">toolRouter</span><span class="hl-1">);  </span><span class="hl-3">// Tool filtering stats</span>
</code><button type="button">Copy</button></pre>

<p><a href="media/router-integration.ts">üìñ Full example</a></p>
<h3 id="üë§-user-profiles-workflows" class="tsd-anchor-link">üë§ User Profiles &amp; Workflows<a href="#üë§-user-profiles-workflows" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Manage user tiers, budgets, and optimization preferences:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">createUserProfile</span><span class="hl-1">, </span><span class="hl-5">createWorkflowProfile</span><span class="hl-1">, </span><span class="hl-5">TIER_PRESETS</span><span class="hl-1">, </span><span class="hl-5">WORKFLOW_PRESETS</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@cascadeflow/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Tier-based profiles</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">freeProfile</span><span class="hl-1"> = </span><span class="hl-0">createUserProfile</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">tier:</span><span class="hl-1"> </span><span class="hl-7">TIER_PRESETS</span><span class="hl-1">.</span><span class="hl-5">free</span><span class="hl-1">,  </span><span class="hl-3">// Max budget: $0.01, Quality: 0.60</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">premiumProfile</span><span class="hl-1"> = </span><span class="hl-0">createUserProfile</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">tier:</span><span class="hl-1"> </span><span class="hl-7">TIER_PRESETS</span><span class="hl-1">.</span><span class="hl-5">premium</span><span class="hl-1">,  </span><span class="hl-3">// Max budget: $0.10, Quality: 0.80</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Custom profile with optimization weights</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">customProfile</span><span class="hl-1"> = </span><span class="hl-0">createUserProfile</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">tier:</span><span class="hl-1"> { </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;custom&#39;</span><span class="hl-1">, </span><span class="hl-5">maxBudget:</span><span class="hl-1"> </span><span class="hl-8">0.05</span><span class="hl-1">, </span><span class="hl-5">qualityThreshold:</span><span class="hl-1"> </span><span class="hl-8">0.75</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-5">optimizationWeights:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">cost:</span><span class="hl-1"> </span><span class="hl-8">0.5</span><span class="hl-1">,    </span><span class="hl-3">// 50% weight on cost</span><br/><span class="hl-1">    </span><span class="hl-5">speed:</span><span class="hl-1"> </span><span class="hl-8">0.3</span><span class="hl-1">,   </span><span class="hl-3">// 30% weight on speed</span><br/><span class="hl-1">    </span><span class="hl-5">quality:</span><span class="hl-1"> </span><span class="hl-8">0.2</span><span class="hl-1">, </span><span class="hl-3">// 20% weight on quality</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Latency-aware profiles</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lowLatencyProfile</span><span class="hl-1"> = </span><span class="hl-0">createUserProfile</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">tier:</span><span class="hl-1"> </span><span class="hl-7">TIER_PRESETS</span><span class="hl-1">.</span><span class="hl-5">premium</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">latencyProfile:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">maxTotalMs:</span><span class="hl-1"> </span><span class="hl-8">2000</span><span class="hl-1">,      </span><span class="hl-3">// 2 second total limit</span><br/><span class="hl-1">    </span><span class="hl-5">maxPerModelMs:</span><span class="hl-1"> </span><span class="hl-8">1000</span><span class="hl-1">,   </span><span class="hl-3">// 1 second per model</span><br/><span class="hl-1">    </span><span class="hl-5">preferParallel:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,  </span><span class="hl-3">// Prefer parallel execution</span><br/><span class="hl-1">    </span><span class="hl-5">skipCascadeThreshold:</span><span class="hl-1"> </span><span class="hl-8">1500</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Use with agent</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">agent</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CascadeAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">models:</span><span class="hl-1"> [...],</span><br/><span class="hl-1">  </span><span class="hl-5">profile:</span><span class="hl-1"> </span><span class="hl-5">premiumProfile</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">cascade:</span><span class="hl-1"> { </span><span class="hl-5">enabled:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Workflow Presets:</strong></p>
<ul>
<li><code>WORKFLOW_PRESETS.production</code> - High quality, reasonable latency</li>
<li><code>WORKFLOW_PRESETS.realtime</code> - Ultra-low latency, single model</li>
<li><code>WORKFLOW_PRESETS.batch</code> - Maximum throughput, relaxed constraints</li>
</ul>
<p><a href="media/user-profiles-workflows.ts">üìñ Full example</a></p>
<h3 id="üè≠-factory-methods" class="tsd-anchor-link">üè≠ Factory Methods<a href="#üè≠-factory-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Simplified agent creation with auto-configuration:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">CascadeAgent</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@cascadeflow/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Auto-detect providers from environment variables</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">envAgent</span><span class="hl-1"> = </span><span class="hl-5">CascadeAgent</span><span class="hl-1">.</span><span class="hl-0">fromEnv</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">quality:</span><span class="hl-1"> </span><span class="hl-2">&#39;production&#39;</span><span class="hl-1">,  </span><span class="hl-3">// &#39;strict&#39; | &#39;production&#39; | &#39;development&#39;</span><br/><span class="hl-1">});</span><br/><span class="hl-3">// Checks for: OPENAI_API_KEY, ANTHROPIC_API_KEY, GROQ_API_KEY, etc.</span><br/><br/><span class="hl-3">// Create from user profile</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">profileAgent</span><span class="hl-1"> = </span><span class="hl-5">CascadeAgent</span><span class="hl-1">.</span><span class="hl-0">fromProfile</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">profile:</span><span class="hl-1"> </span><span class="hl-5">premiumProfile</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">preferredModels:</span><span class="hl-1"> [</span><span class="hl-2">&#39;gpt-4o-mini&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;gpt-4o&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;claude-3-5-haiku-20241022&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Traditional manual configuration (full control)</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">manualAgent</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">CascadeAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">models:</span><span class="hl-1"> [</span><br/><span class="hl-1">    { </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;gpt-4o-mini&#39;</span><span class="hl-1">, </span><span class="hl-5">provider:</span><span class="hl-1"> </span><span class="hl-2">&#39;openai&#39;</span><span class="hl-1">, </span><span class="hl-5">cost:</span><span class="hl-1"> </span><span class="hl-8">0.00015</span><span class="hl-1"> },</span><br/><span class="hl-1">    { </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;gpt-4o&#39;</span><span class="hl-1">, </span><span class="hl-5">provider:</span><span class="hl-1"> </span><span class="hl-2">&#39;openai&#39;</span><span class="hl-1">, </span><span class="hl-5">cost:</span><span class="hl-1"> </span><span class="hl-8">0.00625</span><span class="hl-1"> },</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">  </span><span class="hl-5">cascade:</span><span class="hl-1"> { </span><span class="hl-5">enabled:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Benefits:</strong></p>
<ul>
<li><code>fromEnv()</code>: Auto-detects available providers, sensible defaults</li>
<li><code>fromProfile()</code>: Multi-tenant applications, per-user configuration</li>
<li>Manual config: Full control for production requirements</li>
</ul>
<p><a href="media/factory-methods.ts">üìñ Full example</a></p>
<h3 id="üåä-enhanced-streaming" class="tsd-anchor-link">üåä Enhanced Streaming<a href="#üåä-enhanced-streaming" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Event-driven streaming with real-time progress:</p>
<pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">stream</span><span class="hl-1"> = </span><span class="hl-5">agent</span><span class="hl-1">.</span><span class="hl-0">streamEvents</span><span class="hl-1">(</span><span class="hl-2">&#39;What is TypeScript?&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-5">forceDirect:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">for</span><span class="hl-1"> </span><span class="hl-4">await</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">event</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-5">stream</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">switch</span><span class="hl-1"> (</span><span class="hl-5">event</span><span class="hl-1">.</span><span class="hl-5">type</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">case</span><span class="hl-1"> </span><span class="hl-5">StreamEventType</span><span class="hl-1">.</span><span class="hl-7">START</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Streaming from: </span><span class="hl-6">${</span><span class="hl-5">event</span><span class="hl-9">.</span><span class="hl-5">data</span><span class="hl-9">.</span><span class="hl-5">model</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">case</span><span class="hl-1"> </span><span class="hl-5">StreamEventType</span><span class="hl-1">.</span><span class="hl-7">CHUNK</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-5">process</span><span class="hl-1">.</span><span class="hl-5">stdout</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-5">event</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">content</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">case</span><span class="hl-1"> </span><span class="hl-5">StreamEventType</span><span class="hl-1">.</span><span class="hl-7">COMPLETE</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-10">\n</span><span class="hl-2">Cost: $</span><span class="hl-6">${</span><span class="hl-5">event</span><span class="hl-9">.</span><span class="hl-5">data</span><span class="hl-9">.</span><span class="hl-5">totalCost</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-8">6</span><span class="hl-9">)</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Time: </span><span class="hl-6">${</span><span class="hl-5">event</span><span class="hl-9">.</span><span class="hl-5">data</span><span class="hl-9">.</span><span class="hl-5">timing</span><span class="hl-9">?.</span><span class="hl-5">total</span><span class="hl-6">}</span><span class="hl-2">ms`</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">break</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">case</span><span class="hl-1"> </span><span class="hl-5">StreamEventType</span><span class="hl-1">.</span><span class="hl-7">ERROR</span><span class="hl-1">:</span><br/><span class="hl-1">      </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">`Error: </span><span class="hl-6">${</span><span class="hl-5">event</span><span class="hl-9">.</span><span class="hl-5">data</span><span class="hl-9">.</span><span class="hl-5">error</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">break</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">// Or collect the full result</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">collectResult</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@cascadeflow/core&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">collectResult</span><span class="hl-1">(</span><span class="hl-5">stream</span><span class="hl-1">);</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Content: </span><span class="hl-6">${</span><span class="hl-5">result</span><span class="hl-9">.</span><span class="hl-5">content</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Model: </span><span class="hl-6">${</span><span class="hl-5">result</span><span class="hl-9">.</span><span class="hl-5">modelUsed</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Use Cases:</strong></p>
<ul>
<li>Interactive chat applications</li>
<li>Real-time content generation</li>
<li>Progressive content display</li>
<li>Long-form content (articles, essays)</li>
</ul>
<p><a href="media/enhanced-streaming.ts">üìñ Full example</a></p>
<h2 id="features" class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>üéØ <strong>Smart Cascading</strong>: Automatically tries smaller models first</li>
<li>üí∞ <strong>Cost Optimization</strong>: Save 40-85% on LLM costs</li>
<li>‚ö° <strong>Fast</strong>: 2-10x faster responses with small models</li>
<li>üîÄ <strong>Multi-Provider</strong>: OpenAI, Anthropic, Groq, and more</li>
<li>‚úÖ <strong>Quality Validation</strong>: Multi-signal confidence with semantic analysis</li>
<li>üìä <strong>Telemetry</strong>: Event-driven monitoring with callbacks</li>
<li>üì¶ <strong>Batch Processing</strong>: Sequential processing with analytics</li>
<li>üîÄ <strong>Intelligent Routing</strong>: Complexity-based and capability-aware</li>
<li>üë§ <strong>User Profiles</strong>: Tier-based access control and budgets</li>
<li>üåä <strong>Enhanced Streaming</strong>: Event-driven streaming with progress</li>
<li>üè≠ <strong>Factory Methods</strong>: Simplified setup with auto-configuration</li>
<li>üìà <strong>Cost Tracking</strong>: Detailed metrics and savings analysis</li>
</ul>
<h2 id="examples" class="tsd-anchor-link">Examples<a href="#examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All examples are available in the <a href="media/nodejs"><code>examples/nodejs</code></a> directory:</p>
<ul>
<li><a href="media/quality-profiles.ts"><strong>quality-profiles.ts</strong></a> - Quality validation profiles (strict, production, development, cascade, permissive)</li>
<li><a href="media/telemetry-callbacks.ts"><strong>telemetry-callbacks.ts</strong></a> - Event-driven monitoring and callbacks</li>
<li><a href="media/batch-processing.ts"><strong>batch-processing.ts</strong></a> - Batch processing with progress tracking</li>
<li><a href="media/router-integration.ts"><strong>router-integration.ts</strong></a> - PreRouter and ToolRouter integration</li>
<li><a href="media/user-profiles-workflows.ts"><strong>user-profiles-workflows.ts</strong></a> - User profiles, tiers, and workflows</li>
<li><a href="media/factory-methods.ts"><strong>factory-methods.ts</strong></a> - Factory methods (fromEnv, fromProfile)</li>
<li><a href="media/enhanced-streaming.ts"><strong>enhanced-streaming.ts</strong></a> - Enhanced streaming with events</li>
</ul>
<p>Run any example with:</p>
<pre><code class="bash"><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">tsx</span><span class="hl-1"> </span><span class="hl-2">examples/nodejs/</span><span class="hl-1">&lt;</span><span class="hl-2">example-nam</span><span class="hl-1">e&gt;</span><span class="hl-2">.ts</span>
</code><button type="button">Copy</button></pre>

<h2 id="documentation" class="tsd-anchor-link">Documentation<a href="#documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>See the <a href="https://github.com/lemony-ai/cascadeflow">main cascadeflow documentation</a> for complete guides and examples.</p>
<h2 id="license" class="tsd-anchor-link">License<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>MIT ¬© Lemony Inc.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#cascadeflowcore"><span>@cascadeflow/core</span></a><ul><li><a href="#installation"><span>Installation</span></a></li><li><a href="#quick-start"><span>Quick <wbr/>Start</span></a></li><li><ul><li><a href="#recommended-setup-claude-haiku-gpt-5"><span>Recommended <wbr/>Setup (<wbr/>Claude <wbr/>Haiku + <wbr/>GPT-<wbr/>5)</span></a></li><li><a href="#quality-configuration"><span>Quality <wbr/>Configuration</span></a></li><li><a href="#openai-only"><span>Open<wbr/>AI <wbr/>Only</span></a></li><li><a href="#even-easier-use-presets"><span>Even <wbr/>Easier: <wbr/>Use <wbr/>Presets</span></a></li></ul></li><li><a href="#advanced-features"><span>Advanced <wbr/>Features</span></a></li><li><ul><li><a href="#üéöÔ∏è-quality-profiles"><span>üéöÔ∏è <wbr/>Quality <wbr/>Profiles</span></a></li><li><a href="#üì°-telemetry-callbacks"><span>üì° <wbr/>Telemetry &amp; <wbr/>Callbacks</span></a></li><li><a href="#üì¶-batch-processing"><span>üì¶ <wbr/>Batch <wbr/>Processing</span></a></li><li><a href="#üîÄ-router-integration"><span>üîÄ <wbr/>Router <wbr/>Integration</span></a></li><li><a href="#üë§-user-profiles-workflows"><span>üë§ <wbr/>User <wbr/>Profiles &amp; <wbr/>Workflows</span></a></li><li><a href="#üè≠-factory-methods"><span>üè≠ <wbr/>Factory <wbr/>Methods</span></a></li><li><a href="#üåä-enhanced-streaming"><span>üåä <wbr/>Enhanced <wbr/>Streaming</span></a></li></ul></li><li><a href="#features"><span>Features</span></a></li><li><a href="#examples"><span>Examples</span></a></li><li><a href="#documentation"><span>Documentation</span></a></li><li><a href="#license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/lemony-ai/cascadeflow" class="tsd-nav-link">GitHub</a><a href="https://github.com/lemony-ai/cascadeflow/tree/main/packages/core/examples" class="tsd-nav-link">Examples</a><a href="https://github.com/lemony-ai/cascadeflow/tree/main/docs" class="tsd-nav-link">Python Docs</a></nav><nav class="tsd-navigation"><a href="modules.html">@cascadeflow/core - v0.5.0</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
